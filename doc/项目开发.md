# Never Give Up开发文档

> 本文档主要说明项目内较为核心部分的开发实现，具体的开发文档请参见于Word文档。

## 界面构建

该游戏的界面我们参考了Felgo官方的一个游戏例子。将一个界面分为大小相等的多个格子，以界面左下角作为原点开始。

这样设计的有点在于在关卡的布置上不在需要去定位坐标，而是通过行和列的组合进行定位。

## 界面导航

一个游戏里面有多个页面需要进行切换。在本项目中在不同的界面的导航使用的是**信号**以及**主界面状态转换**的机制。一个界面可以为需要切换界面创建信号，在满足一定条件下，发出信号，主界面捕捉到信号后切换对应的状态，则完成了界面切换。

## 人物移动

该游戏的人物移动逻辑是在人物碰到跳台时自动向上跳，若用户在下落时刻按空格键，则人物会进行超级跳。

人物向上移动的过程中x会增加，即向右移动。与此同时，游戏的场景界面会相应的向左移动相同的距离。则效果看似人物在该地一直跳跃。

## 人物死亡判断

对于人物死亡的情况，在该项目中主要有一下情况：

* 人物撞击尖刺
* 人物掉落
* 人物的身体撞击跳台

主要的设计都是通过碰撞检测，检测碰撞到的物体是否会杀死人物。但对于最后一种情况，人物整体的碰撞需分为两部分。在人物的下部（即脚部）撞击到跳台时则是跳跃动作，但对于人物的其他部分则是死亡。

## 关卡热加载

对于游戏的关卡选择，我们选择的是动态加载组件。因为若在游戏启动时则加载关卡，会使游戏的启动过慢，甚至卡住。

```QML
        // 动态加载关卡
        Loader {
            id: loader
            asynchronous: true
            onLoaded: {
                gameScene.loaded()
            }         
        }
```

使用 ```Loader``` 组件在用户选择了关卡是从磁盘中加载对应的文件。

## 本地数据保存

在每一次通关之后，游戏会自动保存当前关卡的最高成绩至本地的数据库。以此来支持成绩排行的功能。

对于此功能，我们则是直接调用的Felgo内置的数据库组件进行完成的。